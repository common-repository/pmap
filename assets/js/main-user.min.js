(function(a){a(document).ready(function(){if(typeof(Backbone)=="undefined"){return}var e=Backbone.Model.extend({initialize:function(){this.bind("change:map_options",this.regenmap,this);this.bind("change:map",this.regenmarker,this)},regenmarker:function(){var h=this.get("map_options");var i=this;var j=new google.maps.LatLng(h.latitude,h.longitude);var g={position:j,map:i.get("map"),draggable:false,animation:google.maps.Animation.DROP,title:h.title};var f=new google.maps.Marker(g);this.set({marker:f})},regenmap:function(){var g=this.get("map_options");var i={};i.center=g.center;i.zoom=g.zoom;if(i.center=="marker"){i.center=new google.maps.LatLng(g.latitude,g.longitude)}var h=this;var f=new google.maps.Map(h.view.el,i);this.set({map:f})}});var b=Backbone.View.extend({initialize:function(){this.model=new e();this.model.view=this;var g="d_pmap_"+this.el.getAttribute("data-map_id");var f=document.getElementById(g);if(f){f=f.innerHTML;f=f.split(" ").join("");f=JSON.parse(f);this.model.set({map_options:f})}}});var d=a(".pmap");for(var c=0;c<d.length;c++){new b({el:d[c]})}delete d})})(jQuery);